# Philips 4D US DICOM patcher

## Summary

This module converts Cartesian cardiac 4D ultrasound images exported from Philips systems to valid DICOM files.

The files generated by this module can be imported to 3D Slicer's DICOM database. There is also an option to create .nrrd file from the Philips files that can be loaded as a "Volume sequence" into Slicer.

## Usage

### Setup

- Install Slicer
- Start Slicer, install SlicerHeart extension from the Extensions Manager
- Install the pre-requisite Sequences module when asked
- Restart Slicer

### Patch/convert non-compliant Philips Cartesian 4D US DICOM files

- Go to Module: Cardiac / Philips 4D US DICOM patcher
- Select the directory where your Philips-exported files are located as _Input DICOM directory_
- Select an empty directory as _Output directory_, output of the conversion/fix operation will be stored there
- Check _Export to DICOM files_ checkbox if you want to generate corrected DICOM files that can be loaded into standard-compliant DICOM viewers
- Check _Anonymize DICOM files_ checkbox if you want to remove patient information from the output files
- Check _Export to NRRD files_ checkbox if you want to store the output in non-DICOM file format
- Click Patch

### Load patched DICOM files

- Drag-and-drop the directory that contains fixed DICOM files on the Slicer main window
- Slicer will show a popup, keep the default _Load directory into DICOM database_ option and click OK
- Select _Copy_ if your data resides on a removable drive or temporary directory; select _Add link_ if you don't want to make a copy of your files into the Slicer DICOM database (just a link will be added to existing files)
- Click on the patient name of the data that you just imported
- Click _Load_ to load the data

### Load nrrd files

* Drag-and-drop the nrrd file on the Slicer main window
* In the displayed _Add data_ dialog select _Volume sequence_ in the _Description_ column
* Click _OK_ to load the data

### Review loaded 4D ultrasound images

- When a 4D volume sequence is loaded the sequence browser toolbar is displayed (if not, then right-click the toolbar area and click _Sequence browser_)
- Select a sequence in the sequence browser toolbar, click play, pause, prev/next frame, etc. to view the sequence

## User interface

![Philips4dUsDicomPatcher module GUI](Philips4dUsDicomPatcher.png)

- Input DICOM directory: directory where your Philips-exported files are located. Files can be in subdirectories, all files within the directory will be processed.
- Output directory: output of the conversion/fix operation will be stored there
- Export to DICOM files: check if you want to generate corrected DICOM files that can be loaded into standard-compliant DICOM viewers
- Anonymize DICOM files: check if the corrected DICOM files should not contain patient information
- Export to NRRD files: check to enable storage of sequences in nrrd files. It may be readable by some software that do not support DICOM but support common reseach file formats.

## Information for Developers

The module is implemented as a scripted module. Source code is available at:

https://github.com/SlicerHeart/SlicerHeart/tree/master/Philips4dUsDicomPatcher
